(function(){"use strict";var a,b;a=["user_about_me","user_groups","email","publish_actions"],b=angular.module("facegroupApp",["ngCookies","ngResource","ngSanitize","ngRoute","facebook","angularMoment"]).config(["FacebookProvider","$routeProvider",function(a,b){return b.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/feed",{templateUrl:"views/feed.html",controller:"GroupCtrl"}).when("/feed/:group_id?",{templateUrl:"views/feed.html",controller:"GroupCtrl"}).otherwise({redirectTo:"/feed"}),a.init("1542283212663514")}]),b.filter("nl2brLinky",["linkyFilter",function(a){return function(b){var c;return b?b?(c=b.replace(/(\r\n|\r|\n)/g,"(((BR)))"),c=a(c),c.replace(/\(\(\(BR\)\)\)/g,"<br>")):void 0:""}}]),b.directive("handleVideoEmbed",function(){return{restrict:"A",link:function(a,b){return"video"===a.message.type?b.on("click",function(c){var d;return c.preventDefault(),d='<object width="100%" height="360" show="message.type == \'video\'">\n  <param name="movie" ng-value="'+a.message.source+'" />\n  <param name="wmode" value="transparent" />\n  <embed src="'+a.message.source+'" type="application/x-shockwave-flash" wmode="transparent" width="100%" height="360" />\n</object>',angular.element(b).find(".picture").replaceWith(d)}):void 0}}}),b.directive("ngEnter",function(){return function(a,b,c){return b.bind("keydown keypress",function(b){return 13===b.which?(a.$apply(function(){return a.$eval(c.ngEnter)}),b.preventDefault()):void 0})}})}).call(this),function(){"use strict";var a;a=["user_about_me","user_groups","email","publish_actions"],angular.module("facegroupApp").controller("MainCtrl",["$scope","Facebook","$location",function(b,c,d){return angular.element("body").addClass("login"),b.REQUIRED_PERMISSIONS=a,b.$watch(function(){return c.isReady()},function(){return b.facebookReady=!0}),b.checkLogin=function(){return c.getLoginStatus(function(a){return"connected"===a.status?b.fetchUser(function(a){return b.$apply(function(){return b.user=a,b.logged=!0,d.path("/feed")})}):void 0})},b.logged=!1,b.checkLogin()||b.login(),b.login=function(){return c.login(function(){return b.logged=!0,b.checkLogin()},{scope:a})},b.logout=function(){return c.isReady()?c.logout(function(){return b.$apply(function(){return b.logged=!1,d.path("/")})}):void 0},b.fetchUser=function(a){return c.api("/me?fields=permissions,about,email,name",function(c){return b.checkPermissions(c.permissions.data[0])?a(c):b.logout()})},b.checkPermissions=function(b){var c;return c=!0,_.forEach(a,function(a){return _.has(b,a)?void 0:(c=!1,!1)}),c}}])}.call(this),function(){"use strict";angular.module("facegroupApp").controller("GroupCtrl",["$routeParams","$timeout","$location","$scope","Facebook",function(a,b,c,d,e){return angular.element("body").addClass("feed"),angular.element("body").removeClass("login"),e.getLoginStatus(function(b){var e;return"connected"!==b.status?c.path("/"):(d.fetchGoups(),d.hasGroups=!0,a.group_id?(e=a.group_id,d.groupLoading="Loading group feed..",d.actualGroup=e,d.showFeed(e)):void 0)}),d.fetchGoups=function(){return e.api("/me/groups?fields=icon,email,name,id&icon_size=16",function(a){return d.$apply(function(){return d.groups=a.data,d.hasGroups=a.data.length>0?!0:!1})})},d.showFeed=function(a){return e.api("/"+a+"?fields=name,feed.limit(25).fields(message,from,comments.limit(200).fields(from,message,created_time,comment_count,message_tags,like_count,id),full_picture,picture,likes.limit(1000),description,type,status_type,message_tags,caption,link,source,place,name)&limit=100",function(a){return d.$apply(function(){return d.groupFeed={id:a.id,name:a.name,feed:a.feed.data,totalMessages:a.feed.data.length}})})},d.postComment=function(a){var b;return a.newComment.message?(b=a.newComment.message,a.newComment={},e.api("/"+a.id+"/comments","POST",{message:b},function(){var c;return c={from:{id:d.user.id,name:d.user.name},created_time:new Date,like_count:0,message:b},a.hasOwnProperty("comments")?a.comments.data.push(c):a.comments={data:[c]}})):void 0}}])}.call(this);